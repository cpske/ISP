---
title: Tools to Check Code Quality
---

Tools can check coding style and possible code problems, such as semantic errors or use of undefined variables. They are called "linters", "static analyzers", or "code auditors".  "Lint" comes from the `lint` tool for C-language programs. 

Tools can find:

1. Coding Problems
   - language violations
   - unused variables
   - variables used before assignment
   - possible unintended behavior
   - dangerous code
2. Style Problems
   - violations of coding style convention
   - violations of commenting convention
   - inconsistent coding style

## Coding Style and Code Analysis Tools

"[*Python Code Quality: Tools & Best Practices*][real-python-code-quality]"
article in [Real Python][real-python-code-quality] discribes the benefits of code analysis and what teach tools does.

This [Github repo][github-code-analysis-tools] has more details and even more tools.

The top tools for Python are:

* [Pylint](https://www.pylint.org/) one of the most widely used tools.  Checks for style using PEP8 guidelines and looks for bad code signs.  
  - Checks code style and possible problems
  - Assigns **quality score** to your code
  - Can configure to ignore some items or some parts of code (.pylintrc)
  - Can create UML class diagrams
  - Don't expect to eliminate all warnings
  - Install: `pip install pylint`
  - Usage: `pylint path_to_code`  (one or more file names or directory name)

* [Flake8](http://flake8.pycqa.org/en/latest/) combines 3 tools:
  - PyFlakes - finds errors and potential code problems
  - pycodestyle - checks coding style using a subset of PEP8
  - Mccabe - checks McCabe complexity of code
  - Install: `pip install flake8`
  - Flake8 has many plugins, including a [Django plugin](https://pypi.org/project/flake8-django/)

* [MyPy](http://mypy-lang.org/) static type checking using type hints
  - [Code examples](http://mypy-lang.org/examples.html) on Mypy home, side-by-side examples of using type hints

* [Pylama](https://github.com/klen/pylama) A wrapper for 9 different tools, including the tools in Flake8.
  - not as popular as the above tools

### Configure Pylint 

Pylint looks for a configuration file in your current directory and your home directory. Or, you can specify one using the `--rcfile filename` command line option.  In order of priority:

* File given using a `--rcfile filename` command line options
* `pylintrc` or `.pylintrc` in current dirctory
* file named by the `PYLINTRC` environment variable
* `.pylintrc` or `config/.pylintrc` in your home directory

An example pylintrc file is:
```
[MESSAGES CONTROL]
disable = C0102   # ignore black-listed name, such as 'foo'

```
To see **everything** you can set in pylintrc (it's long), run:
```
pylint --gen-rcfile > example.pylintrc
```

Run Pylint and also print a detailed report:

```shell
pylint -ry filaname.py
```

Pylint Message Categories.  The first letter in a Pylint message is:

**C** convention. Violation of coding convention.    
**R** refactor. Suggest refactor based on "good practice" metric violation.    
**W** warning for stylistic problem or minor programming issue.
**E** error.  Code that is probably an error.    
**F** fatal. Error that prevents Pylint from continuing


### Configure Flake8

Flake8 can have both a per-project config file and a global config file.

* Project Configuration: a file named `setup.cfg`, `tox.ini`, or `.flake8` in the project top-level directory
* Global Configuration: a file `$HOME/.config/flake8` on Linux and MacOS. On Windows, file `.flake8` in your home directory.
* Command Line Options override options in a configuration file

An example of a Flake8 config for Django. 
This allows longer lines (default 79) and only 1 blank line between top-level functions.

```
[flake8]
# Django recommends allowing longer lines, such as in models
max-line-length = 119
# test docstrings using PyFlakes
doctests = True

# ignore some errors. Separate each with comma.
ignore =
    E0302    # expected 2 blank lines, found 1

exclude =
    # excluded by default
    .git,
    __pycache__,
    # ignore virtual environments (not our code)
    env,
    venv,
    # Useless to check autogenerated migrations files.
    migrations
```

See [Configuring Flake8](https://flake8.pycqa.org/en/latest/user/configuration.html) and [List of Options](https://flake8.pycqa.org/en/latest/user/options.html)


### Checking Django Projects

There are plugins to provide better analysis and checking of Django projects:

* [pylint-django](https://pypi.org/project/pylint-django/) 
  - Installation: `pip install pylint-django`
  - Usage:  `pylint --load-plugins pylint_django path_to_source_code`

* [Flake8 Django plugin](https://pypi.org/project/flake8-django/) 
  - Installation: `pip install flake8-django`
  - Usage: `cd django-project; flake8`
  - flake8 automatically uses the plugin. In my test, it needs some extra configuration to eliminate superfluous messages.
  - see Flake8 documentation for how to create a config file, either (Windows) `.flake8` or (Linux/MacOS) `.config/flake8`


## Code Analysis in your IDE

* VSCode - Control-Shift-P and enter "Python Select Linter", then Control-Shift-P and "Python Run Linter".
* Pycharm has its own build-in code checker which constantly suggests improvements. 
  - To run Code Analysis, from menu select Code-&gt;Inspect Code... and choose file(s) to inspect.
  - output is shown in "Inspection Results" panel at bottom.  Click on an item to go to source line.
  - offers suggested code change in another panel
* Pydev (Eclipse) has "Code Analysis" feature that uses Pylint.
  - Configure it in Preferences -> Pydev -> Code Analysis    
    I had to manually specify the location of `pylint` for it to work.  
  - Right-click on a file and select Pydev -> Code Analysis.
  - Problems are shown as warning/error markers in left margin of
    editor window.  Will also show in Console if you check preference:    
    [x] Redirect Pylink output to console?

## Check Style for Java

Java is a statically typed, compiled language. A Java IDE and compiler perform a lot of checks for syntax and semantic errors, hence there is less work for other tools.  Some examples of this are:

* A variable must always be declared (avoids spelling errors in variable names).
* Java won't let you use a local variable before a value is explicitly assigned. 
* Attributes are assigned a default value (null, zero, or false) but the IDE and compiler will warn you if it looks like you are using an attribute before explicitly assigning a value.
* Compiler and IDE both warn if you don't close a locally created resource, like a Scanner or InputStream.
* Compiler won't let you pass the wrong type as a parameter or return the wrong type from a method.

For code style checking the standard tool is [Checkstyle](https://checkstyle.sourceforge.io) and [Checkstyle on Github](https://github.com/checkstyle/checkstyle).  It can be integrated into any IDE, even BlueJ.

* [Using Checkstyle](https://skeoop.github.io/docs/Checkstyle.pdf) from Programming 2
* KU Checkstyle Rules [ku-checkstyle.xml](https://skeoop.github.io/docs/ku-checkstyle.xml) by Thai Pangsakulyanont. The rules define the coding standard that Checkstyle expects.

## Resources

[Python Code Quality: Tools & Best Practices][real-python-code-quality] article on Real Python with description of many tools, and code example.

[Python Linters and Code Analysis Tools Curated List][github-code-analysis-tools] detailed list of tools with description and recommendations.

[Flake8](https://simpleisbetterthancomplex.com/packages/2016/08/05/flake8.html) on SimpleIsBetterThanComplex.com has good explanation of Flake8 outout, configuration, and example of testing a Django project with Flake8 and coverage on Travis-CI.

[real-python-code-quality]: https://realpython.com/python-code-quality/
[github-code-analysis-tools]: https://github.com/vintasoftware/python-linters-and-code-analysis
